// 1) Реализовать алгоритм древесной сортировки +
// 2) Источник данных - файл с однопроходным последовательным чтением
// 3) Сформировать несколько наборов данных (целых чисел) разного объёма +
// 4) Сопоставить результаты с теоретическими оценками сложности алгоритмов
// 5) Сделать выводы +

/*********** сортировка с помощью двоичного дерева *************/

#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <locale.h>

typedef struct tree //добавляем структуру дерева
{
    int a;              // данные
    struct tree* left;  // левый  сын
    struct tree* right; // правый сын
} TREE;

TREE* add_to_tree(TREE* root, int new_value)

{
    if (root == NULL)  // если нет сыновей - создаем новый элемент
    {
        root = (TREE*)malloc(sizeof(TREE));
        root->a = new_value;
        root->left = root->right = 0;
        return root;
    }
    if (root->a < new_value)          // добавлем ветвь
        root->right = add_to_tree(root->right, new_value);
    else
        root->left = add_to_tree(root->left, new_value);
    return root;
}

void tree_to_array(TREE* root, int a[]) // процедура заполнения массива
{
    static max2 = 0;                      // счетчик элементов нового массива
    if (root == NULL) return;             // условие окончания - нет сыновей
    tree_to_array(root->left, a);       // обход левого поддерева
    a[max2++] = root->a;
    tree_to_array(root->right, a);      // обход правого поддерева
    free(root);
}

void sort_tree(int a[], int elem_total)        // собственно сортировка
{
    TREE* root;
    int i;

    root = NULL;
    for (i = 0; i < elem_total; i++)        // проход массива и заполнение дерева
        root = add_to_tree(root, a[i]);
    tree_to_array(root, a);             // заполнение массива
}
/* тестовая программа */
void main()
{
    clock_t begin = clock(); /*Начало отсчёта времени выполнения*/

    setlocale(LC_ALL, "Rus");

    int i;
    
    /* Это будем сортировать */

    int a[15] = { 80, 96, 67, 61, 60, 76, 82, 97, 95, 91, 73, 70, 65, 75 };
    sort_tree(a, 15);
    
    //int a[100] = { 960, 499, 371, 696, 428, 331, 758, 133, 40, 254, 241, 547, 244, 692, 565, 946, 585, 347, 759, 178, 589, 771, 737, 975, 812, 472, 255, 986, 500, 650, 685, 459, 148, 56, 155, 576, 387, 912, 708, 427, 166, 948, 973, 409, 640, 538, 355, 224, 884, 114, 402, 473, 138, 448, 695, 609, 702, 681, 109, 352, 366, 568, 422, 722, 75, 808, 634, 782, 234, 800, 730, 207, 209, 369, 745, 563, 593, 629, 676, 994, 101, 559, 132, 548, 741, 249, 935, 849, 601, 300, 416, 100, 721, 137, 174, 529, 956, 762, 570, 969 };
    //sort_tree(a, 100);
    
    //int a[500] = { 982, 931, 617, 622, 753, 117, 803, 887, 825, 932, 740, 465, 734, 968, 748, 581, 531, 479, 687, 302, 234, 556, 141, 620, 275, 121, 211, 209, 194, 272, 237, 176, 203, 853, 797, 955, 970, 600, 842, 794, 532, 258, 265, 549, 6, 846, 80, 485, 381, 718, 88, 521, 338, 363, 642, 572, 836, 821, 808, 11, 23, 660, 978, 630, 408, 820, 423, 939, 400, 681, 204, 949, 49, 28, 171, 409, 889, 669, 929, 226, 31, 571, 775, 602, 406, 595, 417, 618, 69, 225, 596, 699, 632, 415, 815, 802, 763, 488, 824, 790, 658, 405, 199, 546, 73, 127, 772, 103, 697, 547, 705, 142, 114, 520, 759, 183, 744, 354, 881, 376, 769, 2, 947, 583, 721, 345, 290, 545, 135, 948, 333, 494, 21, 460, 266, 124, 157, 812, 829, 260, 953, 942, 779, 712, 522, 66, 4, 898, 834, 844, 416, 565, 761, 98, 109, 896, 46, 57, 229, 539, 78, 688, 804, 202, 845, 616, 30, 104, 568, 971, 882, 280, 95, 404, 99, 301, 179, 144, 594, 912, 708, 355, 9, 817, 251, 55, 873, 593, 951, 167, 397, 152, 13, 182, 115, 997, 860, 247, 700, 383, 449, 976, 360, 552, 331, 369, 368, 241, 60, 16, 191, 412, 343, 424, 524, 351, 676, 347, 864, 922, 747, 68, 447, 450, 714, 426, 74, 841, 756, 442, 208, 337, 448, 396, 879, 639, 291, 981, 859, 715, 504, 210, 719, 582, 101, 303, 649, 367, 749, 81, 38, 154, 279, 87, 459, 535, 12, 174, 633, 628, 491, 342, 701, 837, 256, 641, 937, 559, 307, 388, 911, 537, 224, 189, 131, 310, 805, 590, 816, 926, 18, 554, 940, 895, 640, 954, 665, 454, 884, 905, 760, 288, 105, 328, 371, 638, 175, 543, 482, 990, 469, 499, 439, 22, 670, 378, 917, 17, 871, 164, 765, 365, 349, 125, 957, 230, 801, 780, 557, 195, 346, 277, 336, 746, 774, 767, 151, 684, 344, 507, 443, 941, 986, 787, 677, 958, 410, 548, 686, 431, 399, 411, 198, 244, 562, 587, 728, 435, 94, 806, 453, 249, 819, 306, 613, 591, 880, 967, 289, 515, 851, 975, 739, 489, 137, 900, 604, 461, 920, 61, 995, 372, 425, 190, 731, 994, 934, 673, 585, 813, 134, 102, 985, 77, 892, 473, 483, 29, 373, 86, 490, 436, 861, 51, 319, 45, 525, 991, 783, 674, 220, 703, 592, 83, 111, 653, 486, 143, 921, 781, 724, 54, 43, 34, 233, 664, 671, 446, 186, 120, 456, 822, 47, 264, 418, 339, 384, 63, 108, 150, 215, 387, 184, 943, 847, 432, 292, 668, 475, 657, 166, 643, 897, 946, 960, 40, 53, 76, 386, 536, 826, 936, 169, 626, 877, 334, 269, 830, 610, 776, 570, 828, 645, 407, 324, 833, 685, 173, 278, 612, 528, 711, 242, 356, 648, 972, 394, 831, 42, 516, 458, 502, 323, 79, 326, 262, 840, 793, 738, 185, 935, 305, 646, 252, 1, 992, 963, 623, 752, 44 };
    //sort_tree(a, 500);
    
    //int a[1000] = { 4048, 2002, 3893, 3724, 2594, 3224, 3492, 2053, 1531, 2860, 776, 3916, 4209, 3147, 4863, 1507, 1374, 1820, 4562, 3626, 1304, 3248, 3322, 428, 2744, 4471, 1798, 2009, 1985, 2207, 2380, 2248, 3018, 4944, 1452, 3730, 2342, 3007, 864, 2455, 3297, 1203, 3717, 1180, 407, 282, 4068, 3440, 4340, 3776, 303, 3753, 3931, 3249, 2039, 4081, 4180, 1524, 2792, 4122, 4424, 2735, 4668, 3888, 2446, 106, 2600, 1901, 4951, 2130, 1811, 1999, 4113, 857, 1245, 4969, 4498, 2356, 1688, 826, 349, 3075, 4017, 1392, 105, 859, 3123, 487, 4926, 4482, 3762, 1129, 4521, 3994, 3470, 481, 2554, 4772, 1990, 285, 499, 942, 960, 770, 3594, 746, 1773, 142, 4550, 2862, 3186, 4004, 1263, 1955, 4240, 4267, 4839, 2466, 1715, 4405, 2381, 1650, 477, 4856, 2364, 3618, 682, 2153, 4999, 4767, 3756, 1040, 3925, 855, 805, 3721, 4102, 633, 3962, 3205, 4647, 231, 187, 4495, 3934, 3570, 3150, 2033, 3392, 2919, 330, 1382, 1103, 3000, 1239, 2365, 1588, 2155, 2799, 2555, 3345, 4488, 4680, 3572, 2932, 218, 4670, 4750, 1497, 896, 862, 4487, 2847, 4223, 1090, 2728, 517, 3207, 3992, 3544, 4270, 2228, 3533, 3084, 3691, 673, 3066, 652, 867, 1951, 1058, 4298, 223, 1039, 2396, 1176, 875, 4358, 4640, 4626, 938, 4816, 4679, 1464, 4258, 4678, 3988, 3660, 4853, 4959, 2247, 1059, 2998, 3120, 1148, 3129, 4422, 3508, 1528, 3750, 2702, 1344, 1913, 4573, 4299, 1749, 2289, 474, 3799, 1585, 4529, 2906, 1220, 180, 4499, 55, 2198, 1974, 402, 2023, 2492, 3574, 3759, 3666, 3953, 950, 3026, 2403, 268, 4718, 1837, 4054, 1391, 342, 228, 611, 2447, 3523, 56, 4709, 3104, 4315, 3372, 4402, 4599, 3915, 2162, 144, 3923, 2345, 1281, 1051, 2159, 4264, 2304, 2043, 904, 4845, 4875, 2156, 4356, 4448, 4796, 987, 944, 4326, 587, 4528, 4877, 92, 3617, 4958, 378, 4323, 1459, 696, 1961, 755, 443, 2258, 2597, 1225, 952, 4050, 1465, 2087, 4129, 2618, 4476, 4053, 4876, 3423, 3608, 4809, 644, 979, 569, 3965, 1986, 3453, 432, 799, 622, 3153, 3826, 306, 1193, 298, 3795, 1661, 4361, 272, 3801, 4586, 1010, 1209, 2899, 1324, 1516, 3211, 4031, 984, 3158, 2468, 126, 3513, 3145, 1526, 3388, 2826, 2982, 2964, 2232, 2104, 3031, 3163, 2931, 4757, 1054, 1136, 263, 3170, 565, 1348, 2994, 4524, 3986, 2691, 2092, 3835, 4893, 4939, 724, 4043, 2765, 1871, 3597, 1692, 2251, 2976, 3089, 1630, 221, 774, 975, 1405, 3396, 992, 4189, 1112, 3580, 4508, 2933, 3068, 2657, 2375, 29, 2993, 539, 4009, 1587, 1583, 4084, 1384, 465, 4827, 2264, 1008, 676, 140, 372, 4483, 3418, 4376, 4553, 4300, 4016, 3844, 31, 901, 4230, 1729, 2708, 4108, 1846, 4431, 3746, 254, 2311, 96, 1461, 3203, 1957, 2621, 3896, 1504, 3847, 1517, 2051, 4341, 3773, 4655, 759, 643, 2517, 1469, 3665, 2981, 4007, 384, 842, 1314, 4915, 1276, 791, 4512, 4590, 1814, 4002, 544, 1649, 4987, 2908, 1077, 4933, 1581, 240, 2865, 2608, 4177, 3693, 1523, 2655, 3256, 3800, 3376, 1157, 34, 3676, 3061, 1586, 2748, 2522, 2731, 753, 482, 4738, 928, 4848, 4514, 4384, 3046, 3069, 4134, 1449, 2091, 2404, 2743, 177, 525, 3074, 3459, 1705, 4991, 4182, 801, 1825, 68, 3326, 2823, 4858, 90, 669, 2870, 3807, 13, 2528, 1500, 2807, 2580, 3139, 411, 2370, 3885, 1893, 2186, 210, 3706, 1462, 4261, 3444, 560, 108, 2108, 2308, 3967, 895, 758, 4184, 2832, 3298, 4791, 2128, 23, 2819, 2075, 1286, 1375, 4025, 887, 3607, 4227, 3404, 3349, 2376, 1806, 3771, 537, 4874, 2624, 124, 647, 2419, 1253, 11, 271, 2274, 2611, 289, 3217, 3876, 3805, 2989, 4970, 612, 4462, 4142, 3397, 712, 1964, 2309, 4597, 2641, 1851, 2301, 4496, 4602, 3545, 1402, 3100, 4548, 3199, 211, 1944, 4616, 4993, 3779, 4894, 2281, 4493, 63, 1232, 698, 771, 4904, 4538, 2681, 1895, 3935, 2099, 4523, 1971, 4385, 1983, 2212, 3811, 949, 4338, 4676, 1781, 917, 651, 2560, 1889, 3166, 219, 4368, 1288, 1858, 2341, 2866, 2057, 1364, 3751, 4459, 510, 2876, 2225, 2004, 4859, 3830, 3143, 3039, 3168, 264, 226, 4614, 3114, 4587, 653, 1513, 3146, 4834, 1000, 1431, 1762, 1701, 2000, 2966, 2083, 1855, 3133, 3422, 4028, 4454, 3096, 4688, 1547, 891, 3752, 3042, 4946, 1948, 4, 4934, 3970, 196, 4896, 2804, 1938, 3786, 2721, 1415, 3864, 4642, 2868, 243, 4844, 3093, 1315, 1009, 2962, 472, 2925, 4287, 495, 3577, 2707, 2727, 2148, 4051, 1852, 208, 3434, 4149, 983, 4513, 4137, 1302, 4749, 238, 2561, 2373, 261, 4570, 3442, 2412, 3563, 2510, 4247, 3308, 765, 2980, 1017, 3408, 2374, 4729, 1757, 1665, 3899, 2210, 4945, 2971, 1859, 4070, 4035, 21, 3362, 4408, 4728, 854, 3329, 3381, 4126, 1752, 1865, 970, 2979, 1041, 1662, 2572, 838, 1685, 3382, 4624, 3854, 1313, 2818, 974, 4288, 60, 3718, 2957, 4378, 1001, 688, 2746, 3690, 2078, 541, 3998, 4001, 3086, 2780, 4510, 4045, 4648, 235, 3874, 2359, 2143, 1028, 4334, 1813, 1093, 2747, 1597, 3296, 3504, 1236, 3647, 389, 2095, 3254, 4354, 4681, 2812, 1880, 4795, 1399, 2472, 4363, 1936, 869, 3856, 42, 1776, 1325, 4697, 284, 3294, 2511, 1260, 1496, 2170, 1549, 4930, 3051, 4595, 420, 4117, 4976, 490, 4123, 3414, 2520, 4021, 3878, 1950, 4981, 2150, 2259, 4133, 4277, 3558, 1768, 171, 324, 1911, 1902, 1755, 2035, 2693, 3836, 2726, 4630, 4644, 121, 1389, 2025, 245, 1753, 1196, 4753, 1797, 5, 1699, 1423, 3745, 232, 3006, 3090, 469, 2218, 118, 2262, 4150, 1357, 3909, 1573, 907, 3891, 784, 3428, 3250, 2257, 182, 3498, 726, 3614, 1320, 3774, 1144, 3425, 2401, 4965, 3507, 3674, 2742, 3585, 2568, 2122, 3332, 2490, 4983, 2439, 4098, 4732, 2787, 638, 735, 2145, 1570, 3861, 1833, 1453, 4243, 3943, 4382, 1709, 295, 1671, 2637, 3320, 3288, 1561, 732, 743, 4039, 4381, 1560, 2191, 995, 2890, 4029, 532, 3427, 3472, 4928, 2643, 3542, 2347, 370, 847, 937, 4026, 1475, 3707, 3398, 1799, 1636, 533, 2395, 3437, 1803, 4256, 237, 3327, 2639, 1177, 1969, 1205, 1743, 1018, 2771, 375, 2556, 1064, 1918, 4497, 4010, 2687, 4080, 3642, 1676, 4457, 2720, 648, 1772, 4474, 2437, 2944, 212, 4428, 2503, 1607, 3467, 2389, 1682, 4168, 906, 4218, 1998, 1404, 607, 32, 934, 1450, 2014, 2084, 877, 823, 1536, 3460, 4596, 1188, 3191, 2187, 2589, 1485 };
    //sort_tree(a, 1000);

    printf("\n*************ДРЕВЕСНАЯ СОРТИРОВКА*************\n\n");
    printf("            ОТСОРТИРОВАННвЫЕ ЧИСЛА:\n\n");
    for (i = 0; i < 15; i++)
        printf("%d ", a[i]);
    printf("\n\n");
    printf("**********************************************\n\n");

    clock_t end = clock();
    double time_spent = (double)(end - begin) / CLOCKS_PER_SEC;
    printf("%f сек\n\n", time_spent);
    printf("**********************************************\n");

    return 0;
}